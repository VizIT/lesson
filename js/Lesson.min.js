/*
 Copyright 2013-2021 Vizit Solutions

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
'use strict';window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};window.vizit.lesson.utility=window.vizit.lesson.utility||{};(function(g){g.IdRegistry=function(){var a={};this.getIdFor=function(c){a.hasOwnProperty(c)||(a[c]=0);return++a[c]}};g.idRegistry=new g.IdRegistry})(window.vizit.lesson.utility);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.CUSTOM_EVENT="CustomEvent";g.ValueOutputHandler=function(a,c){this.handleEvent=function(k){h.value=b.value};var b=a;var h=c};g.XChangedEventHandler=function(a,c){this.emitEvent=function(){const k=new CustomEvent(h+"Changed",{detail:{source:b.id,name:h,value:b.value},bubbles:!0,cancelable:!0,composed:!1});b.dispatchEvent(k)};this.handleEvent=function(k){k=k.detail;k.source!=b.id&&(b.value=k.value,k=new CustomEvent("change",{bubbles:!1,cancelable:!0,composed:!1}),b.dispatchEvent(k))};
var b=a;var h=c};g.RangedSource=function(a){var c=a.getAttribute("data-name");var b=a.getAttribute("data-max");var h=a.getAttribute("data-min");var k=a.getAttribute("data-step");var e=c+"_"+this.getIdFor(c);var d=a.hasAttribute("data-value")?a.getAttribute("data-value"):a.innerHTML;a.classList.add("lessonRangedSource");a.textContent="";var f=document.createElement("input");f.setAttribute("class","lessonRangedSource");f.setAttribute("type","range");f.setAttribute("value",d);f.setAttribute("min",h);
f.setAttribute("max",b);f.setAttribute("step",k);f.setAttribute("id","rinput_"+e);h=document.createElement("output");h.setAttribute("id","routput_"+e);h.setAttribute("for","rinput_"+e);e=document.createTextNode(d);h.appendChild(e);a.appendChild(h);a.appendChild(f);a=new g.ValueOutputHandler(f,h);f.addEventListener("input",a.handleEvent.bind(a));f.addEventListener("change",a.handleEvent.bind(a));a=new g.XChangedEventHandler(f,c);f.addEventListener("input",a.emitEvent.bind(a));document.addEventListener(c+
"Changed",a.handleEvent.bind(a))};g.RangedSource.prototype=g.utility.idRegistry})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.CUSTOM_EVENT="CustomEvent";g.Setter=function(a){var c,b,h;this.handleEvent=function(k){const e=h.length;for(let d=0;d<e;++d){const f=new CustomEvent(h[d]+"Changed",{detail:{value:b[d],source:"setter"},bubbles:!0,cancelable:!0,composed:!1});c.dispatchEvent(f)}k.preventDefault()};this.init=function(k){var e;b=[];h=[];var d="click";var f=k.getAttribute("data-desc");var l=k.getAttribute("data-set");k.hasAttribute("data-trigger")&&(d=k.getAttribute("data-trigger"));k.hasAttribute("data-html")&&
(e=k.getAttribute("data-html"));var m=l.split(",");for(l=m.length-1;0<=l;--l){var n=m[l].split("=");h.push(n[0].trim());b.push(n[1].trim())}f&&(c=document.createElement("abbr"),c.setAttribute("title",f));n=document.createElement("button");n.setAttribute("class","setter");if("undefined"!=typeof e)for(n.innerHTML=e;k.firstChild;)k.removeChild(k.firstChild);c?c.appendChild(n):c=n;k.insertBefore(c,k.firstChild);k.addEventListener(d,this.handleEvent.bind(this),!1)};this.init(a)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.SurfaceExtensionEventListiner=function(a,c){this.handleHChanged=function(l){var m=h.getOrigin();var n=h.getHeight();l=(l.detail.value-(m[0]+n*e*d/2))/(e*d);m[0]+=l*e*d/2;m[1]+=l*k*d/2;m[2]+=l*f/2;h.setHeight(n+l);h.setOrigin(m);b.render()};var b=c;var h=a;a=h.getPhi();c=h.getTheta();var k=Math.sin(a);var e=Math.cos(a);var d=Math.sin(c);var f=Math.cos(c)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.MappingEventHandler=function(a,c,b,h){this.handleUpdate=function(f){d(k(f.detail.value));e.requestRender()};var k=new Function(c,"return "+b+";");var e=framework_l;var d=a}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.DirectEventHandler=function(a,c){this.handleUpdate=function(k){b(k.detail.value);h.requestRender()};var b=a;var h=c}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.GaussianSurfaceRChangedEventListiner=function(a,c){this.handleRChanged=function(b){a.setRadius(b.detail.value);c.render()};this.handleHChanged=function(b){a.setHeight(b.detail.value);c.render()}}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.LessonContentEventHandler=function(a,c){this.handleEvent=function(h){h=h.detail;var k=document.getElementsByClassName(b);for(var e=0,d=k.length;e<d;++e){var f=k[e];if(h.source!=f.id){var l=h.value;f.innerHTML=10>l?"&#160;"+l.toFixed(2):l.toFixed(2)}}};var b=c;document.addEventListener(a,this.handleEvent.bind(this),!1)};g.MappingContentEventHandler=function(a,c,b){this.handleEvent=function(e){e=e.detail;var d=document.getElementsByClassName(h);for(var f=0,l=d.length;f<l;++f){var m=d[f];
if(e.source!=m.id){var n=k(e.value);m.innerHTML=10>n?"&#160;"+n.toFixed(2):n.toFixed(2)}}};var h=b;var k=c;document.addEventListener(a,this.handleEvent.bind(this),!1)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.LessonContentIDEventSource=function(a,c){this.handleEvent=function(k){var e=this.id;if(e){const d=e.split("=");1<d.length&&(e=new CustomEvent(d[0]+"Changed",{detail:{value:parseInt(d[1],10),source:e},bubbles:!0,cancelable:!0,composed:!1}),this.dispatchEvent(e))}k.preventDefault()};c=document.getElementsByClassName(c);for(var b=0,h=c.length;b<h;b++)c[b].addEventListener(a,this.handleEvent,!1)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.LessonControlEventHandler=function(a,c){var b=[];var h=!1;var k=a.getID();var e=c.createSVGPoint();this.toSVGCoordinates=function(d,f){e.x=f.clientX;e.y=f.clientY;return e.matrixTransform(d.getScreenCTM().inverse())};this.findTouchByIdentifier=function(d){var f;for(f=0;f<b.length;f++){var l=b[f].identifier;if(l==d)return f}return-1};this.handleTouchStart=function(d){var f;var l=d.targetTouches;0==b.length&&1==l.length&&a.setScreenX(this.toSVGCoordinates(c,l[0]).x);for(f=0;f<l.length;f++){var m=
l[f];-1==this.findTouchByIdentifier(m.identifier)&&b.push(m)}if(d.preventDefault)d.preventDefault();else return!1};this.handleTouchEnd=function(d){var f;var l=d.changedTouches;for(f=0;f<l.length;f++){var m=this.findTouchByIdentifier(l[f].identifier);-1!=m&&(b.splice(m,1),d.preventDefault())}};this.handleOneActiveMove=function(d){var f=d.changedTouches[0];null!=b[0]?b.splice(0,1,f):b.push(f);a.setScreenX(this.toSVGCoordinates(c,f).x);if(d.preventDefault)d.preventDefault();else return!1};this.handleTwoActiveMove=
function(d){var f=b[0];var l=b[1];var m=l.pageX-f.pageX;var n=l.pageY-f.pageY;var y=Math.sqrt(m*m+n*n);var r=d.changedTouches;for(m=0;m<r.length;m++){var q=r[m];n=q.identifier;f.identifier==n?(f=q,b.splice(0,1,q)):l.identifier==n&&(l=q,b.splice(1,1,q))}m=l.pageX-f.pageX;n=l.pageY-f.pageY;a.zoomBy(Math.sqrt(m*m+n*n)/y);if(d.preventDefault)d.preventDefault();else return!1};this.handleTouchMove=function(d){return 1==b.length?this.handleOneActiveMove(d):2==b.length?this.handleTwoActiveMove(d):!0};this.handleMouseDown=
function(d){h=!0;this.handleMouseMove(d)};this.handleMouseUp=function(d){h=!1};this.handleMouseMove=function(d){h&&a.setScreenX(this.toSVGCoordinates(c,d).x)};this.handleMouseWheel=function(d){d=window.event||d;var f=d.deltaY?-d.deltaY:d.wheelDeltaY;a.zoomBy(0<f?2:.5);if(d.preventDefault)d.preventDefault();else return!1};this.handleXChanged=function(d){d=d.detail;d.source!=k&&a.setX(d.value)}}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.ModelImageEventHandler=function(a,c,b){this.handleEvent=function(d){d=d.detail.value;const f=e.length;let l;for(l=0;l<f&&!(e[l]>d);++l);h.src=k[l]};var h=a;var k=[];var e=[];a=b.length;for(let d=0;d<a;d++)0===d%2?k.push(b[d]):e.push(b[d]);document.addEventListener(c+"Changed",this.handleEvent.bind(this),!1)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.RadialDependancyAdaptor=function(a,c,b,h,k,e){this.f=function(t){0==t&&(t=1E-10);var w=t*r;t=d.getField(f+w*y,l+w*n,m+t*q);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])};var d=a;var f=c;var l=b;var m=h;var n=Math.sin(k);var y=Math.cos(k);var r=Math.sin(e);var q=Math.cos(e)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.DotRAdapter=function(a,c,b,h,k,e){this.f=function(u){0==u&&(u=1E-10);var z=u*r;u=d.getField(f+z*y,l+z*n,m+u*q);return u[0]*t+u[1]*w+u[2]*B};var d=a;var f=c;var l=b;var m=h;var n=Math.sin(k);var y=Math.cos(k);var r=Math.sin(e);var q=Math.cos(e);var t=y*r;var w=n*r;var B=q}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.ModelExpressionEventHandler=function(a,c){this.handleEvent=function(f){f=f.detail.value;const l=e.length;for(let m=0;m<l&&!(e[m]>f);++m);MathJax.Hub.Queue(["Text",b,h[i]])};MathJax.Hub.queue.Push(function(){b=MathJax.Hub.getAllJax(a)[0]});var b=a;var h=[];var k=Array.prototype.slice.call(arguments,2);var e=[];var d=c;for(let f=0,l=k.length;f<l;f++)0===f%2?h.push(k[f]):e.push(k[f]);document.addEventListener(d+"Changed",this.handleEvent.bind(this),!1)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.XvsYView=function(a,c,b,h,k,e,d,f){var l=.1;var m=b;var n=h;var y=1E3/(n-m);var r=e;var q=d;var t=1E3/(q-r);this.getID=function(){return f.id};this.mapXToScreen=function(p){return(p-m)*y};this.mapScreenToX=function(p){return p/y+m};this.mapRawToGroupX=function(p){return p-50};this.mapYToScreen=function(p){p>q?p=q+10:p<r&&(p=r-10);return 1E3-(p-r)*t};this.createPointer=function(p,C){var E=document.createElementNS("http://www.w3.org/2000/svg","use");E.setAttributeNS("http://www.w3.org/1999/xlink",
"href","#pointer");E.setAttributeNS(null,"x",p);E.setAttributeNS(null,"y",C);return E};this.dispatchXChangedEvent=function(){const p=new CustomEvent(c+"Changed",{detail:{value:v,source:f.id},bubbles:!0,cancelable:!0,composed:!1});f.dispatchEvent(p)};this.setX=function(p){this.x=p;p>=m&&p<=n&&(A=a.f(p),D.x.baseVal.value=this.mapXToScreen(p),D.y.baseVal.value=this.mapYToScreen(A))};this.setScreenX=function(p){p=this.mapRawToGroupX(p);v=this.mapScreenToX(p);v>m&&v<n&&(A=a.f(v),A=this.mapYToScreen(A),
D.x.baseVal.value=p,D.y.baseVal.value=A,this.dispatchXChangedEvent())};this.computePoints=function(){var p;x="";for(p=m;p<n;p+=l){var C=a.f(p);x+=this.mapXToScreen(p);x+=",";x+=this.mapYToScreen(C);x+=" "}return x=x.substring(0,x.length-1)};this.zoomBy=function(p){m*=p;n*=p;r*=p;q*=p;z.textContent=n.toFixed(2);var C=(m+n)/2;u.textContent=C.toFixed(2);w.textContent=q.toFixed(2);C=(r+q)/2;B.textContent=C.toFixed(2);y=1E3/(n-m);t=1E3/(q-r);l*=p;x=this.computePoints();F.setAttributeNS(null,"points",x);
v=Math.min(n,Math.max(m,v));this.setX(v);this.dispatchXChangedEvent()};b=document.createElementNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(50,20)");h=document.createElementNS("http://www.w3.org/2000/svg","defs");e=document.createElementNS("http://www.w3.org/2000/svg","clipPath");e.setAttributeNS(null,"id","plotClip");d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttributeNS(null,"x",0);d.setAttributeNS(null,"y",0);d.setAttributeNS(null,
"height",1E3);d.setAttributeNS(null,"width",1E3);e.appendChild(d);h.appendChild(e);d=document.createElementNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"id","pointer");e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttributeNS(null,"cx",0);e.setAttributeNS(null,"cy",0);e.setAttributeNS(null,"r",12);e.setAttributeNS(null,"class","rPointer");d.appendChild(e);e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttributeNS(null,"cx",0);e.setAttributeNS(null,
"cy",0);e.setAttributeNS(null,"r",5);e.setAttributeNS(null,"class","rPointer");d.appendChild(e);h.appendChild(d);f.appendChild(h);h=document.createElementNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"stroke-width",5);h.setAttributeNS(null,"stroke","black");e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M 0 1000 L 1000 1000 Z");d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M 0 0 L 0 1000 Z");h.appendChild(d);
h.appendChild(e);b.appendChild(h);h=document.createElementNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"class","markers");e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M 0 0 L 1000 0 Z");h.appendChild(e);e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M 0 500 L 1000 500 Z");h.appendChild(e);e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M 1000 0 L 1000 1000 Z");
h.appendChild(e);e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M 500 0 L 500 1000 Z");h.appendChild(e);var w=document.createElementNS("http://www.w3.org/2000/svg","text");w.setAttributeNS(null,"x","-10");w.setAttributeNS(null,"y","10");w.setAttributeNS(null,"class","axisLabel");w.appendChild(document.createTextNode(q));h.appendChild(w);var B=document.createElementNS("http://www.w3.org/2000/svg","text");B.setAttributeNS(null,"x","-10");B.setAttributeNS(null,
"y","510");B.setAttributeNS(null,"class","axisLabel");B.appendChild(document.createTextNode((r+q)/2));h.appendChild(B);var u=document.createElementNS("http://www.w3.org/2000/svg","text");u.setAttributeNS(null,"x","510");u.setAttributeNS(null,"y","1030");u.setAttributeNS(null,"class","axisLabel");u.appendChild(document.createTextNode((m+n)/2));h.appendChild(u);var z=document.createElementNS("http://www.w3.org/2000/svg","text");z.setAttributeNS(null,"x","1010");z.setAttributeNS(null,"y","1030");z.setAttributeNS(null,
"class","axisLabel");z.appendChild(document.createTextNode(n));h.appendChild(z);e=document.createElementNS("http://www.w3.org/2000/svg","text");e.setAttributeNS(null,"x","-50");e.setAttributeNS(null,"y","510");e.setAttributeNS(null,"transform","rotate(-90 -50,510)");e.setAttributeNS(null,"class","axisLabel");e.appendChild(document.createTextNode(k));h.appendChild(e);e=document.createElementNS("http://www.w3.org/2000/svg","text");e.setAttributeNS(null,"x","510");e.setAttributeNS(null,"y","1055");e.setAttributeNS(null,
"class","axisLabel");e.appendChild(document.createTextNode(c));h.appendChild(e);var x=this.computePoints();var F=document.createElementNS("http://www.w3.org/2000/svg","polyline");F.setAttributeNS(null,"class","curve");F.setAttributeNS(null,"points",x);var v=15;var A=a.f(v);v=this.mapXToScreen(v);A=this.mapYToScreen(A);var D=this.createPointer(v,A);b.appendChild(h);b.appendChild(F);b.appendChild(D);f.appendChild(b);k=new g.LessonControlEventHandler(this,f);f.addEventListener("mousewheel",k.handleMouseWheel.bind(k),
!1);f.addEventListener("wheel",k.handleMouseWheel.bind(k),!1);f.addEventListener("mousedown",k.handleMouseDown.bind(k),!1);document.addEventListener("mouseup",k.handleMouseUp.bind(k),!1);document.addEventListener("mousemove",k.handleMouseMove.bind(k),!1);f.addEventListener("touchstart",k.handleTouchStart.bind(k),!1);f.addEventListener("touchmove",k.handleTouchMove.bind(k),!1);document.addEventListener("touchend",k.handleTouchEnd.bind(k),!1);document.addEventListener(c+"Changed",k.handleXChanged.bind(k),
!1)}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.EventHandler=class{constructor(a){this.updater=a}handleUpdate(a){this.updater(a.detail.value)}}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};(function(g){g.RenderingEventHandler=class extends g.EventHandler{constructor(a,c){super(a);this.renderable=c}handleUpdate(a){super.handleUpdate(a);this.renderable.requestRender()}}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.draggableClass="vizit.draggable";g.DragHandler=class{isValidDrop(a){let c;(a=a.classList)&&(c=a.contains(g.draggableClass));return c}constructor(){document.addEventListener("dragstart",this.handleDragStart.bind(this),!1);document.addEventListener("dragenter",this.handleDragEnter.bind(this),!1);document.addEventListener("dragover",this.handleDragOver.bind(this),!1);document.addEventListener("drop",this.handleDrop.bind(this),!1)}handleDragStart(a){if(this.droppable=this.isValidDrop(a.target))this.dragging=
a.target,this.originalOpacity=this.dragging.style.opacity,this.dragging.style.opacity=.5,this.clientX0=a.clientX,this.clientY0=a.clientY}handleDragEnter(a){this.droppable&&a.preventDefault()}handleDragOver(a){this.droppable&&a.preventDefault()}getTransformValues(a){a=a.style.transform?a.style.transform.split(/\w+\(|\);?/)[1].split(/,\s?/g).map(c=>parseInt(c)):[0,0,0];return{x:a[0],y:a[1],z:a[2]}}handleDrop(a){if(this.droppable){let c=this.getTransformValues(this.dragging);this.dragging.style.transform=
"translate3d("+(c.x+a.clientX-this.clientX0)+"px,"+(c.y+a.clientY-this.clientY0)+"px, "+c.z+"px)";this.dragging.style.opacity=this.originalOpacity;a.preventDefault()}}}})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};
(function(g){g.SNAPSHOT_EVENT="vizit.snapshot";g.captionAttributeName="caption";g.imageSourceAttributeName="src";g.CanvasSnapshot=class extends HTMLElement{constructor(){super();this.shown=!0}static get observedAttributes(){return[g.imageSourceAttributeName,g.captionAttributeName]}attributeChangedCallback(a,c,b){switch(a){case g.imageSourceAttributeName:this.imageSourceValue=b;break;case g.captionAttributeName:this.captionValue=b}}connectedCallback(){const a=document.createElement("div");a.classList.add("snapshot");
a.classList.add(vizit.lesson.draggableClass);a.setAttribute("draggable","true");if(this.hasAttributes()){var c=this.attributes;for(var b=c.length-1;0<=b;b--)switch(c[b].name){case g.captionAttributeName:this.captionValue=c[b].value;break;case g.imageSourceAttributeName:this.imageSourceValue=c[b].value;break;default:a.setAttribute(c[b].name,c[b].value)}}c=document.createElement("div");c.classList.add("snapshotHeader");c.innerHTML=this.captionValue;b=document.createElement("button");b.classList.add("divControl");
b.appendChild(document.createTextNode("X"));b.addEventListener("click",this.close.bind(this),!1);c.appendChild(b);b=document.createElement("button");b.classList.add("divControl");b.appendChild(document.createTextNode("_"));b.addEventListener("click",this.toggleShown.bind(this),!1);c.appendChild(b);a.appendChild(c);this.imageElement=document.createElement("img");this.imageElement.src=this.imageSourceValue;this.imageElement.classList.add("snapshot");a.appendChild(this.imageElement);this.appendChild(a)}toggleShown(){this.shown=
!this.shown;this.imageElement.style.height=this.shown?"unset":"0"}close(a){this.parentElement.removeChild(this);a.preventDefault()}};g.CanvasSnapshooter=class{constructor(a,c,b){this.canvasElement=c;this.parentElement=a;this.id=b;this.taken=0;document.addEventListener(g.SNAPSHOT_EVENT,this.handleEvent.bind(this),!1)}capture(a){var c=document.createElement("canvas-snapshot");this.taken++;c.setAttribute("style",`top: ${2*this.taken}em; left: ${this.taken}em;`);c.setAttribute(g.captionAttributeName,
a);c.setAttribute(g.imageSourceAttributeName,this.canvasElement.toDataURL());this.parentElement.appendChild(c)}handleEvent(a){a.detail.target&&a.detail.target===this.id&&this.capture(a.detail.caption)}};g.variableAttributeName="var";g.eventAttributeName="event";g.methodAttributeName="method";g.SnapshotCaption=class extends HTMLElement{constructor(){super()}static get observedAttributes(){return[g.variableAttributeName,g.eventAttributeName,g.methodAttributeName]}attributeChangedCallback(a,c,b){switch(a){case g.variableAttributeName:this.variableName=
b;break;case g.eventAttributeName:this.eventName=b;break;case g.methodAttributeName:this.dataMethod=b}}connectedCallback(){this.hidden=!0}};g.CanvasSnapshooterButton=class extends HTMLElement{constructor(){super();this.targetAttributeName="target"}static get observedAttributes(){return[this.targetAttributeName]}attributeChangedCallback(a,c,b){a===this.targetAttributeName&&(this.target=b)}handleClick(a){let c,b;this.snapshotCaptionTemplate&&(this.snapshotCaptionVariable&&this.snapshotCaptionEvent&&
(b=`var ${this.snapshotCaptionVariable} = ${this.snapshotCaptionVariableValue};`),b=b?b+("`"+this.snapshotCaptionTemplate+"`"):"`"+this.snapshotCaptionTemplate+"`",c=eval(b));a=new CustomEvent(g.SNAPSHOT_EVENT,{detail:{target:this.target,caption:c},bubbles:!0,cancelable:!0,composed:!1});this.dispatchEvent(a)}handleCaptionValueEvent(a){this.snapshotCaptionVariableValue=a.detail.value}snapshotCaptionDefined(a){"snapshot-caption"===a.localName?(this.snapshotCaptionNode=a,this.snapshotCaptionVariable=
a.getAttribute("var"),(this.snapshotCaptionEvent=a.getAttribute("event"))&&document.addEventListener(this.snapshotCaptionEvent,this.handleCaptionValueEvent.bind(this),!1),this.snapshotCaptionMehod=a.getAttribute("method")):this.snapshotCaptionNode&&this.snapshotCaptionNode.contains(a)&&(this.snapshotCaptionTemplate=this.snapshotCaptionNode.innerHTML)}mutationHandler(a,c){for(const b of a)switch(b.type){case "childList":console.log("Children: "+b);b.addedNodes.forEach(this.snapshotCaptionDefined.bind(this));
break;case "attributes":console.log("Attributes: "+b);break;case "characterData":console.log("Characters: "+b)}}connectedCallback(){if(this.isConnected){this.target=this.getAttribute(this.targetAttributeName);const a=document.createElement("button");a.innerHTML="\ud83d\udcf7<br/>Capture";this.appendChild(a);this.addEventListener("click",this.handleClick,!1);this.mutationObserver=new MutationObserver(this.mutationHandler.bind(this));this.mutationObserver.observe(this,{subtree:!0,attributes:!0,childList:!0,
characterData:!0})}}disconnectedCallback(){this.isConnected||(this.removeEventListener("click",this.handleClick,!1),this.mutationObserver.disconnect())}};customElements.define("canvas-snapshooter",g.CanvasSnapshooterButton);customElements.define("snapshot-caption",g.SnapshotCaption);customElements.define("canvas-snapshot",g.CanvasSnapshot)})(window.vizit.lesson);window.vizit=window.vizit||{};window.vizit.lesson=window.vizit.lesson||{};"use strict";
(function(g){g.LessonBuilder=function(){this.init=function(){let a,c;const b=document.getElementsByClassName("lessonElement");for(var h=b.length;h--;)a=b[h],a.hasAttribute("data-type")&&(c=a.getAttribute("data-type").toLowerCase(),"rangedsource"===c?new g.RangedSource(a):"setter"===c&&new g.Setter(a))};this.initWhenReady=function(){"interactive"===document.readyState||"complete"===document.readyState?this.init():document.addEventListener("DOMContentLoaded",this.init,!1)}};(new g.LessonBuilder).initWhenReady()})(window.vizit.lesson);
//# sourceMappingURL=Lesson.min.js.map 
